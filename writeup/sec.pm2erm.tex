\section{Integration of Plate Models and Entity Relationship Models}

\subsection{Translation of Plate Models to Entity Relationship Models}

\textbf{Translation procedure}
\begin{enumerate}
\item PM $\Rightarrow$ APM
\item APM $\Rightarrow$ ERM
\item reduce ERM
\end{enumerate}

\subsubsection{Atomic Plate Models}

\textbf{Problems with non-atomic plate model translation}
\begin{itemize}
\item vector variables lead to ERMs having bad style
\end{itemize}

\textbf{PM $\Rightarrow$ APM} (Figure~\ref{fig:pm2apm})
\begin{itemize}
\item explicitly represent vector domains as plates
\item remove arrows because they do not express independence assumptions anymore
\end{itemize}

\begin{figure}
\centering
\resizebox{.9\linewidth}{!}{\adjustTikzSize \input{img/apm_vectors.tex}}
\caption{Conversion of a plate model containing two variables $\alpha$ and $\vec x$ to an atomic plate model. The components $x_n$ of the $N$ dimensional vector variable $\vec x$ are represented as individual variables. Arrows are removed because they do not express conditional distributions anymore.}\label{fig:pm2apm}
\end{figure}

\subsubsection{Translation of Atomic Plate Models to Entitiy Relationship Models}

%\begin{figure}
%\centering
%\resizebox{.9\linewidth}{!}{\input{img/pm2erm.tex}}
%\caption{Translation of different plate model constructs to entity relationship models.}\label{fig:pm2erm}
%\end{figure}

\textbf{APM $\Rightarrow$ ERM}
\begin{itemize}
\item variables $\Rightarrow$ attributes\footnote{Variables that are not inside of a plate need to be assigned to an artificial entity type called "Global" [CITATION NEEDED].}
\item plates $\Rightarrow$ entity types
\item plate intersections $\Rightarrow$ relationships (association entitites)
\item constraints affect cardinalities
\end{itemize}

\subsubsection{Reduction of Translated Entity Relationship Models}

\textbf{}
\begin{itemize}
\item convert association entitites w/o attributes to relationships
\item convert degenerated 1:n relationships (expressed as 1:1 weak : 1:n)
\item merge 1:1 relationship entities
\item merge relationships
\end{itemize}

\subsection{Matching Domain Data Models and Translated Entity Relationship Models}

\subsection{Real World Examples}

\subsubsection{Dirichlet Multinomial Text Clustering}

\textbf{Generative process}
\begin{enumerate}
\item draw cluster proportions $\vec \pi \sim \text{Dir}(\vec \alpha)$
\item draw word proportions per cluster $\forall k \in K: \vec \mu_k \sim \text{Dir}(\vec \beta_k)$
\item draw cluster assignments per document $\forall n \in N: \vec z_n \sim \text{Mult}(\vec \pi)$
\item draw token assignments per token $\forall n \in N, m \in M_n: \vec d_{nm} \sim \text{Mult}(\vec \mu_k)$, where $k$ is the cluster selected by $\vec z_n$
\end{enumerate}

\textbf{Constraints}
\begin{align}
\sum_{k \in K} z_{nk} &= 1\\
\sum_{v \in V} d_{nmv} &= 1\\
\sum_{k \in K} \pi_{k} &= 1\\
\sum_{v \in V} \mu_{kv} &= 1
\end{align}

\begin{figure}[t]
\begin{minipage}[t]{0.49\linewidth}
	\begin{center}
		\subfloat[Original clustering plate model]{\label{fig:clustering_platemodel_original}
    	\resizebox{1\linewidth}{!}{\adjustTikzSize \input{img/clustering_transformation_platemodel.tex}}}
	\end{center}
\end{minipage}
\hspace{0.0cm}
\begin{minipage}[t]{0.49\linewidth}
	\begin{center}
		\subfloat[Expanded clustering plate model]{\label{fig:clustering_platemodel_expanded}
		\resizebox{1\linewidth}{!}{\adjustTikzSize \input{img/clustering_transformation_platemodel_expanded.tex}}}
	\end{center}
\end{minipage}\\
\caption{Transformation of the plate model for Dirichlet multinomial clustering of text documents from implicit vector variables to an expanded version containing only atomic variables.}
\label{img:clustering_platemodels}
\end{figure}

\subsubsection{Latent Dirichlet Allocation Topic Model}

\begin{figure}[t]
\begin{minipage}[t]{0.49\linewidth}
	\begin{center}
		\subfloat[Original LDA plate model]{\label{fig:topic_platemodel_original}
    	\resizebox{1\linewidth}{!}{\adjustTikzSize \input{img/topic_transformation_platemodel.tex}}}
	\end{center}
\end{minipage}
\hspace{0.0cm}
\begin{minipage}[t]{0.49\linewidth}
	\begin{center}
		\subfloat[Expanded LDA plate model]{\label{fig:topic_platemodel_expanded}
		\resizebox{1\linewidth}{!}{\adjustTikzSize \input{img/topic_transformation_platemodel_expanded.tex}}}
	\end{center}
\end{minipage}\\
\caption{Transformation of the plate model for latent Dirichlet allocation topic models from implicit vector variables to an expanded version containing only atomic variables.}
\label{img:topic_platemodels}
\end{figure}
